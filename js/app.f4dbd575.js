(function(){"use strict";var e={4039:function(e,o,t){var r=t(7195),n=function(){var e=this,o=e._self._c;return o("div",{attrs:{id:"app",valign:"top",align:"left"}},[o("b-container",[o("b-row",[o("b-col",[o("img",{staticStyle:{border:"2px"},attrs:{alt:"Deul'Air",src:t(1434),height:"100px"}})]),o("b-col",[o("img",{staticStyle:{border:"2px"},attrs:{alt:"LM Oxygène",src:t(2465),height:"100px"}})])],1)],1),o("span",{staticStyle:{border:"2px"}},[o("div",{staticStyle:{position:"relative, z-index: 10"},attrs:{id:"map",align:"center",valign:"middle"}},[o("Isochrone",{attrs:{msg:"Cartographie des parcs"}})],1)]),e._m(0)],1)},s=[function(){var e=this,o=e._self._c;return o("span",{attrs:{id:"legend"}},[o("table",{staticClass:"legend",attrs:{border:"1px"}},[o("tr",[o("th",{staticStyle:{color:"#000000"}},[e._v("Légende Isochone ")]),o("th",{staticStyle:{color:"#000000"}},[e._v("Pourcentage de population avec un parc")])]),o("tbody",[o("tr",[o("td",{staticStyle:{"background-color":"#2B100D"}},[e._v("OMS: n'est pas un parc")]),o("td",[e._v("n/a")])]),o("tr",[o("td",{staticStyle:{"background-color":"#58D83E"}},[e._v("> 12 m²/habitant (100%)")]),o("td",{staticStyle:{"background-color":"#58D83E"}},[e._v(">= 98% à <=100%")])]),o("tr",[o("td",{staticStyle:{"background-color":"#D8C13E"}},[e._v("6 < m²/habitant <= 12 (<>50%)")]),o("td",{staticStyle:{"background-color":"#D8C13E"}},[e._v(">= 80% et <98%")])]),o("tr",[o("td",{staticStyle:{"background-color":"#D8783E"}},[e._v("3 < m²/habitant <= 6 (<25%)")]),o("td",{staticStyle:{"background-color":"#D8783E"}},[e._v(">= 20% et <80%")])]),o("tr",[o("td",{staticStyle:{"background-color":"#D84E3E"}},[e._v("<= 3 m²/habitant (>25%)")]),o("td",{staticStyle:{"background-color":"#D84E3E"}},[e._v("<20%")])])])])])}],a=function(){var e=this,o=e._self._c;return o("div",[e.loading?o("span",[e._v("Chargement...")]):e._e(),o("label",{attrs:{for:"checkbox"}},[e._v("Isochrones")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.showIsochrones,expression:"showIsochrones"}],attrs:{id:"checkbox",type:"checkbox"},domProps:{checked:Array.isArray(e.showIsochrones)?e._i(e.showIsochrones,null)>-1:e.showIsochrones},on:{change:function(o){var t=e.showIsochrones,r=o.target,n=!!r.checked;if(Array.isArray(t)){var s=null,a=e._i(t,s);r.checked?a<0&&(e.showIsochrones=t.concat([s])):a>-1&&(e.showIsochrones=t.slice(0,a).concat(t.slice(a+1)))}else e.showIsochrones=n}}}),o("label",{attrs:{for:"checkboxWithOMS"}},[e._v("Conforme OMS")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxWithOMS,expression:"checkboxWithOMS"}],attrs:{id:"checkboxWithOMS",type:"checkbox"},domProps:{checked:Array.isArray(e.checkboxWithOMS)?e._i(e.checkboxWithOMS,null)>-1:e.checkboxWithOMS},on:{change:function(o){var t=e.checkboxWithOMS,r=o.target,n=!!r.checked;if(Array.isArray(t)){var s=null,a=e._i(t,s);r.checked?a<0&&(e.checkboxWithOMS=t.concat([s])):a>-1&&(e.checkboxWithOMS=t.slice(0,a).concat(t.slice(a+1)))}else e.checkboxWithOMS=n}}}),o("label",{attrs:{for:"cbCarre"}},[e._v("Données carroyées")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.showCarre,expression:"showCarre"}],attrs:{id:"cbCarre",type:"checkbox"},domProps:{checked:Array.isArray(e.showCarre)?e._i(e.showCarre,null)>-1:e.showCarre},on:{change:function(o){var t=e.showCarre,r=o.target,n=!!r.checked;if(Array.isArray(t)){var s=null,a=e._i(t,s);r.checked?a<0&&(e.showCarre=t.concat([s])):a>-1&&(e.showCarre=t.slice(0,a).concat(t.slice(a+1)))}else e.showCarre=n}}}),o("label",{attrs:{for:"cbCadastre"}},[e._v("Cadastre")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.showCadastre,expression:"showCadastre"}],attrs:{id:"cbCadastre",type:"checkbox"},domProps:{checked:Array.isArray(e.showCadastre)?e._i(e.showCadastre,null)>-1:e.showCadastre},on:{change:function(o){var t=e.showCadastre,r=o.target,n=!!r.checked;if(Array.isArray(t)){var s=null,a=e._i(t,s);r.checked?a<0&&(e.showCadastre=t.concat([s])):a>-1&&(e.showCadastre=t.slice(0,a).concat(t.slice(a+1)))}else e.showCadastre=n}}}),o("br"),o("l-map",{staticStyle:{height:"700px",width:"95%"},attrs:{zoom:e.zoom,center:e.center},on:{"update:bounds":e.boundsUpdated}},[o("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),e.showIsochrones?o("l-geo-json",{attrs:{geojson:e.geojsonIsochrone,options:e.detailIsochrone,"options-style":e.styleIsochroneFunction}}):e._e(),e.showCarre?o("l-geo-json",{attrs:{geojson:e.geojsonCarre,options:e.detailCarre,"options-style":e.styleCarreFunction}}):e._e(),e.showCadastre?o("l-geo-json",{attrs:{geojson:e.geojsonCadastre,options:e.detailCadastre,"options-style":e.styleCadastreFunction}}):e._e(),o("l-control-scale",{attrs:{position:"topright",imperial:!1,metric:!0}})],1),o("br"),o("span",[e._v("Bounds: "+e._s(e.bounds))])],1)},i=[],c=(t(8145),t(185)),l=t(819),h=t(3685),d=t(4761),p=t(5462),u=t(5943),g=t(2314),v={name:"Isochrone",components:{LMap:c.Z,LIconDefault:l.Z,LMarker:h.Z,LTileLayer:d.Z,LGeoJson:p.Z,LPolygon:u.Z,LControlScale:g.Z},data(){return{loading:!1,showIsochrones:!0,showCarre:!1,showCadastre:!1,checkboxWithOMS:!0,zoom:14,minZoom:9,center:[50.6349747,3.046428],bounds:null,boundSwLat:0,boundSwLng:0,boundNeLat:0,boundNeLng:0,geojsonIsochrone:null,geojsonCarre:null,geojsonCadastre:null,restUrlCadastre:"http://localhost:8980/cadastre/area",restUrlCarre:"http://localhost:8980/insee/carre200m/corner",restUrlIsochrones:"http://localhost:8980/map/park/parkByCorner",fillColor:"#A0DCA0",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> <a href="https://www.facebook.com/lmoxygene/">LM Oxygène</a> '}},methods:{boundsUpdated(e){if(this.bounds=e,e._southWest.lat<this.boundSwLat||e._southWest.lng<this.boundSwLng||e._northEast.lat>this.boundNeLat||e._northEast.lng>this.boundNeLng){this.boundSwLat=e._southWest.lat,this.boundSwLng=e._southWest.lng,this.boundNeLat=e._northEast.lat,this.boundNeLng=e._northEast.lng;var o="?swLat="+this.boundSwLat+"&swLng="+this.boundSwLng+"&neLat="+this.boundNeLat+"&neLng="+this.boundNeLng;console.log(o),this.callGeoJsonIsochrones(o),this.callGeoJsonCarres(o),this.callGeoJsonCadastre(o)}},async callGeoJsonIsochrones(e){console.log("callGeoJsonIsochrones");var o="https://raw.githubusercontent.com/cunvoas/opendata-tools/main/geoservice-map/src/assets/geojson/lilleParks.json";const t=await fetch(o+e),r=await t.json();this.geojsonIsochrone=r},async callGeoJsonCarres(e){console.log("callGeoJsonCarres");var o="https://raw.githubusercontent.com/cunvoas/opendata-tools/main/geoservice-map/src/assets/geojson/lilleCarre.json";const t=await fetch(o+e),r=await t.json();this.geojsonCarre=r},async callGeoJsonCadastre(e){console.log("callGeoJsonCadastre");var o="https://raw.githubusercontent.com/cunvoas/opendata-tools/main/geoservice-map/src/assets/geojson/lilleCadastre.json";const t=await fetch(o+e),r=await t.json();this.geojsonCadastre=r}},computed:{detailIsochrone(){return{onEachFeature:this.onDetailIsochrone}},detailCadastre(){return{onEachFeature:this.onDetailCadastre}},detailCarre(){return{onEachFeature:this.onDetailCarre}},styleIsochroneFunction(){const e=this.fillColor;return()=>({weight:2,color:"#406C40",opacity:.95,fillColor:e,fillOpacity:.6})},styleCarreFunction(){return()=>({weight:2,color:"#24216a",opacity:.95,fillColor:"#060512",fillOpacity:.2})},styleCadastreFunction(){return()=>({weight:2,color:"#CB9800",opacity:.95,fillColor:"#FFFF99",fillOpacity:.3})},onDetailIsochrone(){return(e,o)=>{o.bindTooltip("<div>Quartier:"+e.properties.quartier+"</div><div>"+e.properties.name+" (id:"+e.properties.id+")</div><div>"+e.properties.people+" hab. pour "+e.properties.area+" m² ("+e.properties.areaPerPeople+" m²/h)</div>",{permanent:!1,sticky:!0}),this.checkboxWithOMS&&!e.properties.oms?o.setStyle({fillColor:e.properties.fillColor,opacity:.4,fillOpacity:.2}):o.setStyle({fillColor:e.properties.fillColor,fillOpacity:.6})}},onDetailCarre(){return(e,o)=>{o.bindTooltip("<div>ID:"+e.properties.id+"</div><div>Commune: "+e.properties.commune+"</div><div>Population: "+e.properties.people+"</div><div>Dont parc: "+e.properties.popParkIncluded+"</div><div>Sans parc: "+e.properties.popParkExcluded+"</div>",{permanent:!1,sticky:!0}),"n/a"!==e.properties.popParkIncluded&&o.setStyle({fillColor:e.properties.fillColor,fillOpacity:.6})}},onDetailCadastre(){return(e,o)=>{o.bindTooltip("<div>INSEE:"+e.properties.idInsee+"</div><div>Commune: "+e.properties.nom+"</div>",{permanent:!1,sticky:!0})}}},created(){var e=this;this.loading=!0,Promise.all([this.callGeoJsonCarres(e.restUrlCarre+"?swLat=50.61309246538529&swLng=2.967338562011719&neLat=50.65664364875093&neLng=3.125095367431641"),this.callGeoJsonIsochrones(e.restUrlIsochrones+"?swLat=50.61309246538529&swLng=2.967338562011719&neLat=50.65664364875093&neLng=3.125095367431641"),this.callGeoJsonCadastre(e.restUrlCadastre+"?swLat=50.61309246538529&swLng=2.967338562011719&neLat=50.65664364875093&neLng=3.125095367431641")]).then((o=>{console.log(o),e.loading=!1}))}},b=v,f=t(1001),m=(0,f.Z)(b,a,i,!1,null,null,null),y=m.exports,C={name:"App",components:{Isochrone:y}},w=C,k=(0,f.Z)(w,n,s,!1,null,null,null),_=k.exports;r.ZP.config.productionTip=!1,new r.ZP({render:e=>e(_)}).$mount("#app")},1434:function(e,o,t){e.exports=t.p+"img/logo-deulair.2d9ef365.png"},2465:function(e,o,t){e.exports=t.p+"img/logo-lmo.8c965956.png"}},o={};function t(r){var n=o[r];if(void 0!==n)return n.exports;var s=o[r]={exports:{}};return e[r].call(s.exports,s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(o,r,n,s){if(!r){var a=1/0;for(h=0;h<e.length;h++){r=e[h][0],n=e[h][1],s=e[h][2];for(var i=!0,c=0;c<r.length;c++)(!1&s||a>=s)&&Object.keys(t.O).every((function(e){return t.O[e](r[c])}))?r.splice(c--,1):(i=!1,s<a&&(a=s));if(i){e.splice(h--,1);var l=n();void 0!==l&&(o=l)}}return o}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[r,n,s]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.p=""}(),function(){var e={143:0};t.O.j=function(o){return 0===e[o]};var o=function(o,r){var n,s,a=r[0],i=r[1],c=r[2],l=0;if(a.some((function(o){return 0!==e[o]}))){for(n in i)t.o(i,n)&&(t.m[n]=i[n]);if(c)var h=c(t)}for(o&&o(r);l<a.length;l++)s=a[l],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(h)},r=self["webpackChunkgeoservice_lmoxygene"]=self["webpackChunkgeoservice_lmoxygene"]||[];r.forEach(o.bind(null,0)),r.push=o.bind(null,r.push.bind(r))}();var r=t.O(void 0,[998],(function(){return t(4039)}));r=t.O(r)})();
//# sourceMappingURL=app.f4dbd575.js.map