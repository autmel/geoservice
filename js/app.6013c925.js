(function(){"use strict";var e={8975:function(e,t,o){var r=o(7195),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app",valign:"top",align:"left"}},[t("b-container",[t("b-row",[t("b-col",[t("a",{attrs:{href:"https://www.helloasso.com/associations/aut-mel",target:"_blank"}},[t("img",{staticStyle:{border:"2px"},attrs:{alt:"Aut'MEL'",src:o(4881),height:"100px"}})])]),t("b-col",[t("a",{attrs:{href:"https://www.helloasso.com/associations/deul-air",target:"_blank"}},[t("img",{staticStyle:{border:"2px"},attrs:{alt:"Deul'Air",src:o(1434),height:"100px"}})])]),t("b-col",[t("a",{attrs:{href:"https://www.helloasso.com/associations/lm-oxygene",target:"_blank"}},[t("img",{staticStyle:{border:"2px"},attrs:{alt:"LM Oxygène",src:o(2465),height:"100px"}})])])],1)],1),t("span",{staticStyle:{border:"2px"}},[t("div",{staticStyle:{position:"relative, z-index: 10"},attrs:{id:"map",align:"center",valign:"middle"}},[t("Isochrone",{attrs:{msg:"Cartographie des parcs"}})],1)]),e._m(0)],1)},n=[function(){var e=this,t=e._self._c;return t("span",{attrs:{id:"legend"}},[t("table",{staticClass:"legend",attrs:{border:"1px"}},[t("tr",[t("th",{staticStyle:{color:"#000000"}},[e._v(" Légende Isochone (Valide OMS) ")])]),t("tbody",[t("tr",[t("td",{staticStyle:{"background-color":"#1a9900"}},[e._v(" > 12 m²/habitant en ville (45 m²/hab à la campagne) ")])]),t("tr",[t("td",{staticStyle:{"background-color":"#9ee88f"}},[e._v(" 10 < m²/habitant <= 12 (entre 25 et 45 m²/hab à la campagne) ")])]),t("tr",[t("td",{staticStyle:{"background-color":"#d8973e"}},[e._v(" > 10 m²/habitant en ville (25 m²/hab à la campagne) mais dont une partie de la population est exclue. ")])]),t("tr",[t("td",{staticStyle:{background:"linear-gradient(to right, #7c7c7c, #e0e0e0)"}},[e._v(" < 10 m²/habitant (< 25 m²/hab à la campagne) ")])]),t("tr",[t("td",{staticStyle:{"background-color":"#f1e2e2",color:"black"}},[e._v(" N'est pas un parc ")])]),t("tr",[t("td",{staticStyle:{"background-color":"#4944f5"}},[e._v(" N'a pas été calculé ")])])])])])}],s=function(){var e=this,t=e._self._c;return t("div",[t("label",{attrs:{for:"annee"}},[e._v("Année")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.annee,expression:"annee"}],staticClass:"form-control",attrs:{id:"annee"},on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.annee=t.target.multiple?o:o[0]},e.onAnnee]}},[t("option",{attrs:{value:"2019",selected:"selected"}},[e._v("2019")]),t("option",{attrs:{value:"2017"}},[e._v("2017")]),t("option",{attrs:{value:"2015"}},[e._v("2015")])]),t("label",{attrs:{for:"checkbox"}},[e._v(" | Isochrones")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.showIsochrones,expression:"showIsochrones"}],attrs:{id:"checkbox",type:"checkbox"},domProps:{checked:Array.isArray(e.showIsochrones)?e._i(e.showIsochrones,null)>-1:e.showIsochrones},on:{change:function(t){var o=e.showIsochrones,r=t.target,a=!!r.checked;if(Array.isArray(o)){var n=null,s=e._i(o,n);r.checked?s<0&&(e.showIsochrones=o.concat([n])):s>-1&&(e.showIsochrones=o.slice(0,s).concat(o.slice(s+1)))}else e.showIsochrones=a}}}),t("label",{attrs:{for:"cbCarre"}},[e._v(" | Données carroyées")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.showCarre,expression:"showCarre"}],attrs:{id:"cbCarre",type:"checkbox"},domProps:{checked:Array.isArray(e.showCarre)?e._i(e.showCarre,null)>-1:e.showCarre},on:{change:function(t){var o=e.showCarre,r=t.target,a=!!r.checked;if(Array.isArray(o)){var n=null,s=e._i(o,n);r.checked?s<0&&(e.showCarre=o.concat([n])):s>-1&&(e.showCarre=o.slice(0,s).concat(o.slice(s+1)))}else e.showCarre=a}}}),t("label",{attrs:{for:"cbCadastre"}},[e._v(" | Cadastre")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.showCadastre,expression:"showCadastre"}],attrs:{id:"cbCadastre",type:"checkbox"},domProps:{checked:Array.isArray(e.showCadastre)?e._i(e.showCadastre,null)>-1:e.showCadastre},on:{change:function(t){var o=e.showCadastre,r=t.target,a=!!r.checked;if(Array.isArray(o)){var n=null,s=e._i(o,n);r.checked?s<0&&(e.showCadastre=o.concat([n])):s>-1&&(e.showCadastre=o.slice(0,s).concat(o.slice(s+1)))}else e.showCadastre=a}}}),t("br"),t("l-map",{staticStyle:{height:"700px",width:"95%"},attrs:{zoom:e.zoom,center:e.center,"min-zoom":e.minZoom,"max-zoom":e.maxZoom},on:{"update:bounds":e.boundsUpdated}},[e._l(e.tileProviders,(function(e){return t("l-tile-layer",{key:e.name,attrs:{name:e.name,visible:e.visible,url:e.url,attribution:e.attribution,"layer-type":"base"}})})),e.showIsochrones?t("l-geo-json",{attrs:{geojson:e.geojsonIsochrone,options:e.detailIsochrone,"options-style":e.styleIsochroneFunction}}):e._e(),e.showCarre?t("l-geo-json",{attrs:{geojson:e.geojsonCarre,options:e.detailCarre,"options-style":e.styleCarreFunction}}):e._e(),e.showCadastre?t("l-geo-json",{attrs:{geojson:e.geojsonCadastre,options:e.detailCadastre,"options-style":e.styleCadastreFunction}}):e._e(),t("l-control",{attrs:{position:"bottomright"}},[t("div",{staticClass:"dataDetail",attrs:{id:"dataDetail"}},[t("h4",[e._v(" Détail des données ")]),e._v("  "),t("br"),e._v("  ")])]),t("l-control-layers",{attrs:{position:"topright"}}),t("l-control-scale",{attrs:{position:"bottomleft",imperial:!1,metric:!0}})],2)],1)},i=[],l=(o(8145),o(185)),c=o(819),p=o(3685),h=o(4761),u=o(9437),d=o(5462),m=o(5943),g=o(5379),v=o(2314),b={name:"Isochrone",components:{LMap:l.Z,LIconDefault:c.Z,LMarker:p.Z,LTileLayer:h.Z,LControlLayers:u.Z,LGeoJson:d.Z,LPolygon:m.Z,LControl:g.Z,LControlScale:v.Z},data(){return{loading:!1,showIsochrones:!1,showCarre:!0,showCadastre:!1,checkboxWithOMS:!0,zoom:14,minZoom:10,maxZoom:18,center:[50.6349747,3.046428],bounds:null,boundSwLat:0,boundSwLng:0,boundNeLat:0,boundNeLng:0,geojsonIsochrone:null,geojsonCarre:null,geojsonCadastre:null,annee:"2019",restUrlCadastre:"http://localhost:8980/isochrone/map/cadastre/area",restUrlCarre:"http://localhost:8980/isochrone/map/insee/carre200m/area",restUrlIsochrones:"http://localhost:8980/isochrone/map/park/area",fillColor:"#A0DCA0",tileProviders:[{name:"Carte OpenStreetMap",visible:!0,attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},{name:"Carte WorldStreetMap",visible:!1,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",attribution:"ArcGIS World Street Map (Esri)"},{name:"Satellite ArcGisOnline",visible:!1,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:'&copy; <a href="https://www.arcgis.com/">ArcGisOnline</a> <a href="https://www.facebook.com/lmoxygene/">LM Oxygène</a> '}]}},methods:{onAnnee(){var e="?swLat="+this.boundSwLat+"&swLng="+this.boundSwLng+"&neLat="+this.boundNeLat+"&neLng="+this.boundNeLng+"&annee="+this.annee;console.log(e),this.callGeoJsonIsochrones(e)},boundsUpdated(e){if(this.bounds=e,e._southWest.lat<this.boundSwLat||e._southWest.lng<this.boundSwLng||e._northEast.lat>this.boundNeLat||e._northEast.lng>this.boundNeLng){this.boundSwLat=e._southWest.lat,this.boundSwLng=e._southWest.lng,this.boundNeLat=e._northEast.lat,this.boundNeLng=e._northEast.lng;var t="?swLat="+this.boundSwLat+"&swLng="+this.boundSwLng+"&neLat="+this.boundNeLat+"&neLng="+this.boundNeLng+"&annee="+this.annee;console.log(t),this.callGeoJsonIsochrones(t),this.callGeoJsonCarres(t),this.callGeoJsonCadastre(t)}},async callGeoJsonIsochrones(e){var t="https://raw.githubusercontent.com/autmel/geoservice/main/geojson/park/park_c2c_1_"+this.annee+".json";console.log("callGeoJsonIsochrones"+t+e);const o=await fetch(t+e),r=await o.json();this.geojsonIsochrone=r},async callGeoJsonCarres(e){var t="https://raw.githubusercontent.com/autmel/geoservice/main/geojson/carre200m/carre200m_c2c_1_"+this.annee+".json";console.log("callGeoJsonCarres"+t+e);const o=await fetch(t+e),r=await o.json();this.geojsonCarre=r},async callGeoJsonCadastre(e){var t="https://raw.githubusercontent.com/autmel/geoservice/main/geojson/cadastre/cadastre_c2c_1.json";console.log("callGeoJsonCadastre"+t+e);const o=await fetch(t+e),r=await o.json();this.geojsonCadastre=r}},computed:{detailIsochrone(){return{onEachFeature:this.onDetailIsochrone}},detailCadastre(){return{onEachFeature:this.onDetailCadastre}},detailCarre(){return{onEachFeature:this.onDetailCarre}},styleIsochroneFunction(){const e=this.fillColor;return()=>({weight:2,color:"#406C40",opacity:.95,fillColor:e,fillOpacity:.6})},styleCarreFunction(){return()=>({weight:2,color:"#24216a",opacity:.95,fillColor:"#060512",fillOpacity:.2})},styleCadastreFunction(){return()=>({weight:2,color:"#CB9800",opacity:.95,fillColor:"#FFFF99",fillOpacity:.3})},onDetailIsochrone(){return(e,t)=>{t.bindTooltip("<div>Quartier:"+e.properties.quartier+"</div><div>"+e.properties.name+" (id:"+e.properties.id+")</div><div>"+e.properties.people+" hab. pour "+e.properties.area+" m² ("+e.properties.areaPerPeople+" m²/h)</div>",{permanent:!1,sticky:!0}),this.checkboxWithOMS&&!e.properties.oms?t.setStyle({fillColor:e.properties.fillColor,opacity:0,fillOpacity:0}):t.setStyle({fillColor:e.properties.fillColor,fillOpacity:.6})}},onDetailCarre(){return(e,t)=>{t.on("mouseover",(function(e){var t=e.target.feature;const o="<h4>Données carroyées : Parc / Habitant</h4><div>id Inspire:"+t.properties.idInspire+"</div><div>Commune: <b>"+t.properties.commune+"</b>, pop.: <b>"+t.properties.people+"</b></div>";var r="";null===t.properties.surfaceTotalParkOms||""===t.properties.surfaceTotalParkOms?r="<div style='text-align: center'><b><i>Non calculé</i></b></div>":(r="<div>ont accès: "+t.properties.popParkIncludedOms+" pers. (sans: "+t.properties.popParkExcludedOms+")</div><div>Surface parcs: "+t.properties.surfaceTotalParkOms+" m²</div><div>Partagés avec : "+t.properties.popSquareShareOms+" pers.</div><div>Soit : <b>"+t.properties.squareMtePerCapitaOms+" m²/hab</b></div><div style='padding-top: 1em;'><i><u>Parcs accessibles:</u><br />",""!==t.properties.commentParks?r+=t.properties.commentParks+"</i></div>":r+="Aucun</i></div>"),e.target.setStyle({weight:5}),document.getElementById("dataDetail").innerHTML=o+r})),t.on("mouseout",(function(e){e.target.setStyle({weight:2})})),"n/a"!==e.properties.popParkIncluded?t.setStyle({fillColor:e.properties.fillColor,fillOpacity:.6}):null!==e.properties.surfaceTotalParkOms&&""!==e.properties.surfaceTotalParkOms||t.setStyle({fillColor:"#4944f5",fillOpacity:.2})}},onDetailCadastre(){return(e,t)=>{t.bindTooltip("<div>INSEE:"+e.properties.idInsee+"</div><div>Commune: "+e.properties.nom+"</div>",{permanent:!1,sticky:!0})}}},beforeMount(){console.log("beforeMount");var e=this;e.loading=!0,Promise.all([this.callGeoJsonCarres(""),this.callGeoJsonIsochrones(""),this.callGeoJsonCadastre("")]).then((t=>{console.log(t),e.loading=!1}))}},f=b,y=o(1001),w=(0,y.Z)(f,s,i,!1,null,null,null),C=w.exports,_={name:"App",components:{Isochrone:C}},k=_,S=(0,y.Z)(k,a,n,!1,null,null,null),x=S.exports;r.ZP.config.productionTip=!1,new r.ZP({render:e=>e(x)}).$mount("#app")},4881:function(e,t,o){e.exports=o.p+"img/logo-autmel.db56a748.png"},1434:function(e,t,o){e.exports=o.p+"img/logo-deulair.2d9ef365.png"},2465:function(e,t,o){e.exports=o.p+"img/logo-lmo.8c965956.png"}},t={};function o(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,r,a,n){if(!r){var s=1/0;for(p=0;p<e.length;p++){r=e[p][0],a=e[p][1],n=e[p][2];for(var i=!0,l=0;l<r.length;l++)(!1&n||s>=n)&&Object.keys(o.O).every((function(e){return o.O[e](r[l])}))?r.splice(l--,1):(i=!1,n<s&&(s=n));if(i){e.splice(p--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var p=e.length;p>0&&e[p-1][2]>n;p--)e[p]=e[p-1];e[p]=[r,a,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p=""}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,n,s=r[0],i=r[1],l=r[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(l)var p=l(o)}for(t&&t(r);c<s.length;c++)n=s[c],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(p)},r=self["webpackChunkgeoservice_lmoxygene"]=self["webpackChunkgeoservice_lmoxygene"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[998],(function(){return o(8975)}));r=o.O(r)})();
//# sourceMappingURL=app.6013c925.js.map